<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Nivel 4</title>
    <link rel="stylesheet" href="css/styles.css">
</head>

<body>

    <div id="nivel4" class="nivel">

        <!-- VIDAS -->
        <div class="vidas-wrapper">
            <img id="vida1" class="vida" src="assets/icons/corazon_rojo.png">
            <img id="vida2" class="vida" src="assets/icons/corazon_rojo.png">
        </div>

        <h2>NIVEL 4</h2>

        <div class="contenedor-logo">
            <img id="imagenActual" class="img-deformada" src="" alt="Imagen a adivinar">
            <img id="imagenRespuesta" class="img-respuesta" src="" alt="Imagen respuesta" style="display: none;">
        </div>

        <p id="pregunta4" style="font-size: 20px; font-weight: bold; margin-bottom: 20px;"></p>

        <div id="opciones4" class="opciones"></div>

        <button class="volver" onclick="volverMenu()">Volver al menú</button>

        <img src="assets/logo.png" class="logo-fakmind">

    </div>

    <!-- POPUP FINAL - GANAR NIVEL 4 -->
    <div id="popupNivel4" class="popup-overlay">
        <div class="popup">
            <h3>¡Felicitaciones!</h3>
            <p>Ganaste el <strong>descuento máximo</strong>! 30% OFF y un trago</p>
            <div class="qr-code">
                <img src="assets/qrs/nivel3.png" alt="QR Descuento Máximo">
            </div>
            <button class="close-btn" onclick="volverMenu()">Volver al menú</button>
        </div>
    </div>

    <!-- POPUP PERDER NIVEL 4 - RECLAMAR RECOMPENSAS NIVEL 3 -->
    <div id="popupPerderNivel4" class="popup-overlay">
        <div class="popup">
            <h3>Reclama las recompensas del Nivel 3</h3>
            <button class="reward-button" onclick="showRewardClaimPopup('popupRecompensaNivel3')">Reclamar</button>
            <button class="close-btn" onclick="volverMenu()" style="margin-top: 10px;">Volver al menú</button>
        </div>
    </div>

    <!-- POPUP RECOMPENSA NIVEL 3 -->
    <div id="popupRecompensaNivel3" class="popup-overlay">
        <div class="popup">
            <h3>¡Felicidades!</h3>
            <p>Ganaste un <strong>20% de descuento</strong> y un trago</p>
            <div class="qr-code">
                <img src="assets/qrs/nivel2.png" alt="QR Descuento">
            </div>
            <button class="close-btn"
                onclick="hideRewardPopup('popupRecompensaNivel3'); hideRewardPopup('popupPerderNivel4'); volverMenu();">Cerrar</button>
        </div>
    </div>

    <!-- LOGOS FOOTER -->
    <div class="bottom-logos">
        <img src="assets/mata.png" class="logo-mata">
        <img src="assets/yourfriends.png" class="logo-yourfriends">
    </div>

    <script src="js/game.js"></script>
    <script>
        // Datos del Nivel 4 - Con imágenes
        // NOTA: Asegúrate de tener las imágenes 1.PNG (o 1.JPG) y 6.png/6r.png en assets/4/
        const itemsNivel4 = [
            { imagen: "assets/4/1.png", imagenRespuesta: "assets/4/1r.png", pregunta: "¿Cuál de estas marcas colaboró con Supreme?", correcta: "The North Face", opciones: ["Dior", "The North Face", "Balmain", "Diesel"] },
            { imagen: "assets/4/2.png", imagenRespuesta: "assets/4/2r.png", pregunta: "¿Cuál de estas marcas es italiana?", correcta: "Palm Angels", opciones: ["Off-White", "Palm Angels", "Carhartt", "Stüssy"] },
            { imagen: "assets/4/3.png", imagenRespuesta: "assets/4/3r.png", pregunta: "¿Cuál fue el primer modelo de zapatillas colaboración de Yeezy con Adidas?", correcta: "Yeezy 750 Boost", opciones: ["Yeezy 350 V1", "Yeezy 750 Boost", "Yeezy Foam Runner", "Yeezy Slide"] },
            { imagen: "assets/4/4.png", imagenRespuesta: "assets/4/4r.png", pregunta: "¿En qué país nació la marca A Bathing Ape (BAPE)?", correcta: "Japón", opciones: ["Corea del Sur", "Japón", "China", "Estados Unidos"] },
            { imagen: "assets/4/5.png", imagenRespuesta: "assets/4/5r.png", pregunta: "¿Quién fundó Off-White?", correcta: "Virgil Abloh", opciones: ["Virgil Abloh", "Kanye West", "Nigo", "Jerry Lorenzo"] },
            { imagen: "assets/4/6.png", imagenRespuesta: "assets/4/6r.png", pregunta: "¿Quiénes son los dueños de fakmind?", correcta: "Lean y Santi", opciones: ["Lucas y Mateo", "Lean y Santi", "Juli y Fran", "Valen y Pedro"] }
        ];

        // Instancia del motor de juego para Nivel 4
        let gameEngine;

        function iniciarNivel4() {
            gameEngine = new GameEngine({
                items: itemsNivel4, 
                imageElementId: "imagenActual",
                imageRespuestaId: "imagenRespuesta",
                preguntaElementId: "pregunta4",
                optionsContainerId: "opciones4",
                livesElementIds: ["vida1", "vida2"],
                popupId: "popupNivel4",
                onComplete: () => { },
                onGameOver: () => {
                    showRewardPopup("popupPerderNivel4");
                }
            });

            gameEngine.init();
        }

        function volverMenu() {
            goToMenu();
        }

        // Iniciar automáticamente al cargar la página
        window.onload = iniciarNivel4;
    </script>

</body>

</html>